<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Get Password - www.buznik.net</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Description" content="Password generator in JavaScript." />
<meta name="verify-reformal" content="04aaf6bb57192f12fc4b7f21" />
<link rel="shortcut icon" type="image/ico" href="favicon.ico" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
<meta name="viewport" content="width=device-width, initial-scale=1">

</head>

<body>
	<div id="container">
		<h1>GetPass <blink>3</blink></h1>

		<div id="pass">
			<div class="controls_wrapper">
				<div class="length_input">
				  <div><label for="password_length">Password Length</label></div>
				  <div class="input_group"></div>
				</div>

				<div class="controls">
					<label>Controls</label>
					<button class="button" onclick="printpass()">Refresh</button>
					<button class="button copyToClipboard">Copy</button>
					<button class="button" onclick="hide(); getElementById('show').style.display='block'">!</button>
				</div>
			</div>

			<div id="pass_block">
				<input type="text" spellcheck="false" id="pass_place0" value="" onclick="this.focus();this.select();" /><br/>
			</div>
			<div id="show">
				<small onclick="show()"><a href="#">&bull; &rarr; a</a></small>
			</div>
		</div>

		<a href="https://github.com/beshur/getpass" class="source_tip" title="on github">Source code</a>
	</div>

	<script type="text/javascript" src="https://rawcdn.githack.com/beshur/getpass/2.0.0/getpass.js"></script>
	<script type="text/javascript">
		var passwordLengthMin = 8;
		var passwordLengthMax = 24;
		var passwordLength = passwordLengthMin;
		var numberOfInputs = 1;
		var generatedPass = [];

		function genfivepass() {
			for (i = 0; i < 5; i++) {
				generatedPass[i] = passGen(passwordLength);
			}

			return generatedPass;
		}

		function printpass() {
			var generatedPass = genfivepass();
			for (var i=0; i< numberOfInputs; i++) {
				form_id='pass_place' + i;
				document.getElementById(form_id).value=generatedPass[i];
			}

		}

		function hide() {
			for (var i=0; i< numberOfInputs; i++) {
				form_id='pass_place' + i;
				document.getElementById(form_id).type='password';
			}
		}
		function show() {
			for (var i=0; i< numberOfInputs; i++) {
				form_id='pass_place' + i;
				document.getElementById(form_id).type='text';
			}
		}

		// https://gist.github.com/Chalarangelo/65320a1953388d0042829ac1fb989e33#file-copytoclipboard-js
		function copyToClipboard(str) {
		  const el = document.createElement('textarea');
		  el.value = str;
		  document.body.appendChild(el);
		  el.select();
		  document.execCommand('copy');
		  document.body.removeChild(el);
		};

		function renderPassLengthInputs() {
			var container = document.querySelector('.length_input .input_group');
			for (var i = passwordLengthMin; i <= passwordLengthMax; i = i + 4) {
				var item = document.createElement('span');
				item.textContent = i;
				if (i === passwordLengthMin) {
					item.classList.add('active');
				}
				container.appendChild(item);
			}
		}

		function toggleActiveClassForPassLengthInput(el) {
			var elSiblings = el.parentNode.children;
			var active = 'active';
			for (let i = 0; i < elSiblings.length; i++) {
				elSiblings[i].classList.remove(active);
			}
			el.classList.add(active);
		}

		function start() {
			renderPassLengthInputs();
			printpass();

			document.querySelector('.length_input .input_group').addEventListener('click', function(event) {
				var el = event.target;
				var newLength = parseInt(el.textContent);
				if (newLength) {
					passwordLength = newLength;
					printpass();
					toggleActiveClassForPassLengthInput(el);
				}
			});

			document.querySelector('.copyToClipboard').addEventListener('click', function(event) {
				copyToClipboard(generatedPass[0]);
			});
		}
		window.onload=start;

	</script>

</body>
</html>